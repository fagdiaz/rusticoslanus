<div class="admin-page">
  <header class="admin-header">
    <div>
      <p class="eyebrow">Administración</p>
      <h2>Pedidos</h2>
    </div>
    <div class="filters-bar">
      <label class="filter-field">
        <span>Email</span>
        <input
          type="text"
          placeholder="filtrar por email"
          [(ngModel)]="filtroEmail"
          (keyup.enter)="onFilterChange()"
        />
      </label>
      <label class="filter-field">
        <span>DNI</span>
        <input
          type="text"
          placeholder="filtrar por DNI"
          [(ngModel)]="filtroDni"
          (keyup.enter)="onFilterChange()"
        />
      </label>
      <div class="filters-actions">
        <button type="button" class="btn primary" (click)="loadOrders()">Refrescar</button>
        <button type="button" class="btn ghost" (click)="limpiarFiltros()">Limpiar</button>
      </div>
    </div>
  </header>

  <section class="admin-body">
    <div *ngIf="isLoading" class="status">Cargando pedidos...</div>

    <div class="table-container" *ngIf="!isLoading">
      <div *ngIf="!pedidosFiltrados.length" class="empty-state">
        No se encontraron pedidos con los filtros aplicados.
      </div>

      <div class="table-wrapper" *ngIf="pedidosFiltrados.length">
        <table class="admin-table">
          <thead>
            <tr>
              <th># Pedido</th>
              <th>Email</th>
              <th>DNI</th>
              <th>Estado</th>
              <th>Fecha</th>
              <th>Total</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of pedidosFiltrados">
              <td>{{ p.numeroPedido || p.id }}</td>
              <td>{{ p.emailUsuario || p.email }}</td>
              <td>{{ p.dni || '' }}</td>
              <td>{{ p.status }}</td>
              <td>{{ p.fecha || p.createdAt || '' }}</td>
              <td>{{ p.total || p.montoTotal || p.totalCompra || '' }}</td>
              <td class="table-actions">
                <button class="action-btn" type="button" (click)="updateStatus(p, 'creado')">Creado</button>
                <button class="action-btn" type="button" (click)="updateStatus(p, 'en preparación')">Preparación</button>
                <button class="action-btn" type="button" (click)="updateStatus(p, 'en proceso de entrega')">Entrega</button>
                <button class="action-btn" type="button" (click)="updateStatus(p, 'entregado')">Entregado</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</div>
