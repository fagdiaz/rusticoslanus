<div class="signup-container">
  <form [formGroup]="signupForm" (ngSubmit)="signup()">
    <div class="signup-field">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" />
      <div class="error" *ngIf="email?.invalid && (email?.dirty || email?.touched)">
        <span *ngIf="email?.errors?.['required']">
          El email es obligatorio.
        </span>
        <span *ngIf="email?.errors?.['email']">
          El formato de email no es válido.
        </span>
      </div>
    </div>

    <div class="signup-field">
      <label for="password">Contraseña</label>
      <div class="password-wrapper">
        <input
          id="password"
          [type]="showPassword ? 'text' : 'password'"
          formControlName="password"
        />
        <button
          type="button"
          class="toggle-visibility"
          (click)="showPassword = !showPassword"
        >
          {{ showPassword ? 'Ocultar' : 'Mostrar' }}
        </button>
      </div>
      <div class="error" *ngIf="password?.invalid && (password?.dirty || password?.touched)">
        <span *ngIf="password?.errors?.['required']">
          La contraseña es obligatoria.
        </span>
        <span *ngIf="password?.errors?.['minlength']">
          La contraseña debe tener al menos 6 caracteres.
        </span>
      </div>
    </div>

    <div class="signup-field">
      <label for="confirmPassword">Confirmar contraseña</label>
      <div class="password-wrapper">
        <input
          id="confirmPassword"
          [type]="showPassword ? 'text' : 'password'"
          formControlName="confirmPassword"
        />
      </div>
      <div
        class="error"
        *ngIf="(confirmPassword?.dirty || confirmPassword?.touched) && signupForm.hasError('passwordsMismatch')"
      >
        Las contraseñas no coinciden.
      </div>
    </div>

    <div class="signup-field">
      <label for="dni">DNI</label>
      <input id="dni" type="number" formControlName="dni" />
    </div>

    <div class="signup-field">
      <label for="province">Provincia</label>
      <select id="province" formControlName="province">
        <option value="">Seleccioná una provincia</option>
        <option value="CABA">CABA</option>
        <option value="GBA">GBA</option>
        <option value="Buenos Aires">Buenos Aires</option>
        <option value="Catamarca">Catamarca</option>
        <option value="Chaco">Chaco</option>
        <option value="Chubut">Chubut</option>
        <option value="Córdoba">Córdoba</option>
        <option value="Corrientes">Corrientes</option>
        <option value="Entre Ríos">Entre Ríos</option>
        <option value="Formosa">Formosa</option>
        <option value="Jujuy">Jujuy</option>
        <option value="La Pampa">La Pampa</option>
        <option value="La Rioja">La Rioja</option>
        <option value="Mendoza">Mendoza</option>
        <option value="Misiones">Misiones</option>
        <option value="Neuquén">Neuquén</option>
        <option value="Río Negro">Río Negro</option>
        <option value="Salta">Salta</option>
        <option value="San Juan">San Juan</option>
        <option value="San Luis">San Luis</option>
        <option value="Santa Cruz">Santa Cruz</option>
        <option value="Santa Fe">Santa Fe</option>
        <option value="Santiago del Estero">Santiago del Estero</option>
        <option value="Tierra del Fuego">Tierra del Fuego</option>
        <option value="Tucumán">Tucumán</option>
      </select>
    </div>

    <div class="signup-field">
      <label for="date">Fecha de nacimiento</label>
      <input id="date" type="date" formControlName="date" />
    </div>

    <div class="edad-info" *ngIf="edad !== null">
      Edad: {{ edad }} años
    </div>

    <button type="submit" [disabled]="signupForm.invalid || loading">
      {{ loading ? 'Registrando...' : 'Crear cuenta' }}
    </button>
  </form>
</div>
